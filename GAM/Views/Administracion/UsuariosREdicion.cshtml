
@{
    ViewBag.Title = "Proveedor Edición";
    var IdUsuarios = @ViewBag.DetalleUsuario.Usuarios.Id.ToString();
}


<input type="hidden" id="IdUsuario" name="IdUsuario" value="@ViewBag.DetalleUsuario.Usuarios.Id.ToString()" />
<input type="hidden" id="IdConfiguracion" name="IdConfiguracion" value="@Session["IdConfiguracion"].ToString()" />

<div class="page-inner">
    <div class="page-header">
        <h4 class="page-title">Edición de Proveedor/Responsable</h4>
    </div>
    <div class="row">

        <div class="col-md-12">
            <div class="card">

                <div class="card-body">

                    <ul class="nav nav-pills nav-secondary" id="pills-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Edición</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-asuntos" role="tab" aria-controls="pills-profile" aria-selected="false">Asuntos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="3" data-toggle="pill" href="#pills-documentos" role="tab" aria-controls="pills-profile" aria-selected="false">Documentos</a>
                        </li>
                    </ul>
                    <div class="tab-content mt-3 mb-4" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                            <p style="width: 650px;"></p>


                            <!--Estilo 1-->

                            <div class="row">

                                <div class="col-md-12">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Nombre</span>
                                            </div>
                                            <input type="text" id="Nombre" class="form-control" aria-label="Nombre" required autocomplete="off" value="@ViewBag.DetalleUsuario.Usuarios.Nombre" />
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row">

                                <div class="col-md-4 text-center">

                                    <div class="form-check">
                                        <label class="form-radio-label">
                                            <input class="form-radio-input" type="radio" name="RadiosInternoExterno" value="1" @(ViewBag.DetalleUsuario.Usuarios.InternoExterno == 1 ? "checked" : "") onchange="CambiarEmpresasALocales();">
                                            <span class="form-radio-sign">Interno</span>
                                        </label>
                                        <label class="form-radio-label ml-3">
                                            <input class="form-radio-input" type="radio" name="RadiosInternoExterno" value="2" @(ViewBag.DetalleUsuario.Usuarios.InternoExterno == 2 ? "checked" : "") onchange="CambiarEmpresasAProveedores();">
                                            <span class="form-radio-sign">Externo</span>
                                        </label>
                                    </div>

                                </div>
                                <div class="col-md-4 text-center">

                                    <div class="form-check">
                                        <label class="form-radio-label">
                                            <input class="form-radio-input" type="radio" name="optionsRadios" value="1" @(ViewBag.DetalleUsuario.Usuarios.FisicaMoral == 1 ? "checked" : "")>
                                            <span class="form-radio-sign">Física</span>
                                        </label>
                                        <label class="form-radio-label ml-3">
                                            <input class="form-radio-input" type="radio" name="optionsRadios" value="2" @(ViewBag.DetalleUsuario.Usuarios.FisicaMoral == 2 ? "checked" : "")>
                                            <span class="form-radio-sign">Moral</span>
                                        </label>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">RFC</span>
                                            </div>
                                            <input type="text" id="RFC" class="form-control" aria-label="RFC" value="@ViewBag.DetalleUsuario.Usuarios.RFC" />
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row">

                                <div class="col-md-4">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Correo</span>
                                            </div>
                                            <input type="text" id="Correo" class="form-control" aria-label="Correo" required autocomplete="off" value="@ViewBag.DetalleUsuario.Usuarios.Correo" onblur="validarCorreo(this);" />
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Teléfono</span>
                                            </div>
                                            <input type="text" id="Telefono" class="form-control" aria-label="Telefono" maxlength="10" autocomplete="off" data-toggle="tooltip" data-placement="top" title="Sólo números" value="@ViewBag.DetalleUsuario.Usuarios.Telefono" />
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Celular</span>
                                            </div>
                                            <input type="text" id="Celular" class="form-control" aria-label="Celular" required maxlength="10" autocomplete="off" data-toggle="tooltip" data-placement="top" title="Sólo números" value="@ViewBag.DetalleUsuario.Usuarios.Celular" />
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <div class="row">

                                <div class="col-md-8">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Dirección</span>
                                            </div>
                                            <input type="text" id="Direccion" class="form-control" aria-label="Dirección" value="@ViewBag.DetalleUsuario.Usuarios.Direccion" />
                                        </div>
                                    </div>

                                </div>



                                <div class="col-md-4">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Ciudad</span>
                                            </div>
                                            <input type="text" id="Ciudad" class="form-control" aria-label="Ciudad" value="@ViewBag.DetalleUsuario.Usuarios.Ciudad" />
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <div class="row">
                                <div class="col-md-12">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Notas</span>
                                            </div>
                                            <textarea id="Notas" class="form-control" aria-label="With textarea">@ViewBag.DetalleUsuario.Usuarios.Notas</textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>



                            <div class="row">

                                <div class="col-md-12 text-center">

                                    <button id="Btn02" class="btn btn-success animated" onclick="GuardarModificado();">Guardar Modificaciones</button>

                                </div>

                            </div>
                        </div>
                        <div class="tab-pane fade" id="pills-asuntos" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <p style="width: 650px;"></p>
                            <h4>Asuntos en los que está asignado el proveedor/responsable</h4>

                            <table class="table table-head-bg-primary nowrap" style="width:100%;">
                                <thead class="header">
                                    <tr>
                                        <th>Asunto</th>
                                        <th>Vencimiento</th>
                                        <th>Administrador Asunto</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if (ViewBag.PersonasEnAsuntos != null)
                                    {
                                        foreach (var itm in ViewBag.PersonasEnAsuntos)
                                        {
                                            <tr>
                                                <td>@itm.Oportunidades.Nombre</td>
                                                <td>@itm.Oportunidades.Cierre.ToString("dd/MM/yyyy")</td>
                                                <td>@GAM.Utilerias.CustomHelpers.NombreCreadorOportunidad(itm.Oportunidades.Id.ToString())</td>
                                                <td><a href="/Oportunidades/Edicion?Id=@itm.Oportunidades.Id">Detalle</a></td>
                                            </tr>
                                        }
                                    }

                                </tbody>
                            </table>
                        </div>




                        <!---Inicio Area Provedores-->

                        <div class="tab-pane fade" id="pills-documentos" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <p style="width: 650px;"></p>
                            <h4>Documentos Relacionados del proveedor/responsable</h4>

                            <div class="row">

                                <div class="col-md-6">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Notas</span>
                                            </div>
                                            <textarea id="NotasArc" name="NotasArc" class="form-control" aria-label="With textarea"></textarea>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6">

                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">Palabras Clave</span>
                                            </div>
                                            <input type="text" id="PalabrasClave" name="PalabrasClave" class="form-control" aria-label="Palabras Clave" />
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <br />
                            <div class="container" align="center">

                                <div class="row">
                                    <div class="col">

                                        <label class="row col-md-3 col-form-label fw-bold">Clasificación</label>

                                        <select class="form-control form-control-sm input-solid" id="clasificacion" name="clasificacion" style="width: 180px" onchange="ClasificacionSeleccionada();">
                                            <option value=""></option>
                                            @foreach (var clas in GAM.Models.Catalogos.ListarClasP("DocumentosASAEClasificacion", @Request["IdUsuario"]))
                                            {
                                                <option value="@clas.Id">@clas.Nombre</option>
                                            }
                                        </select>

                                        <div class="col-md-4 text-center "><a id="ListaClasificaciones" href="#" onclick="AdministrarClasificaciones(@Request["IdUsuario"]);">Crear Clasificación</a></div>

                                    </div>

                                    <div class="col">
                                        <label class="row col-md-3 col-form-label fw-bold">SubClasificación</label>
                                        <select class="form-control form-control-sm input-solid" id="subclasificacion" name="subclasificacion" style="width: 180px"></select>
                                        <div class="col-md-4 text-center"><a id="ListaSubClasificaciones" href="#" onclick="AdministrarSubClasificaciones()">Crear SubClasificación</a></div>
                                    </div>
                                </div>



                                <div>


                                    <div class="row">

                                        <div class="col-md-12 text-center">
                                            <div class="input-group" style="margin-left: 20%">

                                                <div class="form-group form-inline">

                                                    <input type="file" id="ArchivoASubir" class="form-control" /> <br />

                                                    <input type="hidden" id="idproveedor" value="@Request["IdUsuario"]" />

                                                    <button id="SubirArchivo" class="btn btn-success" onclick="SubirArchivo();">Subir Archivo</button>

                                                </div>

                                            </div>

                                        </div>

                                    </div>
                                </div>

                            </div>

                            <br /><br />

                            <!------INICIO TARJETA CLASIFICACIONES------->
                            <div class="card">

                                <div class="card-body">

                                    <div class="tab-pane fade active show" id="v-pills-home-icons" role="tabpanel" aria-labelledby="v-pills-home-tab-icons" style="width: 90%">
                                        <div class="accordion accordion-secondary">

                                            @foreach (var items in GAM.Models.Catalogos.ListarClasP("DocumentosASAEClasificacion", @Request["IdUsuario"]))
                                            {

                                                var encabezado = "heading" + items.Id;
                                                var colapso = "colapso" + items.Id;
                                                var gcolapso = "#colapso" + items.Id;
                                                <div class="card">
                                                    <div class="card-header collapsed" id="@encabezado" data-toggle="collapse" data-target="@gcolapso" aria-expanded="false" aria-controls="@colapso" role="button">
                                                        <div class="span-icon">
                                                            <div class="fas fa-folder text-warning"></div>
                                                        </div>
                                                        <div class="span-title text-dark fw-bold">
                                                            @items.Nombre
                                                        </div>
                                                        <div class="span-mode text-dark"></div>
                                                    </div>

                                                    <div id="@colapso" class="collapse" aria-labelledby="@encabezado" data-parent="#accordion">
                                                        <div class="card-body">
                                                            <!--INICIO TABLA CLASIFCACIONES-->
                                                            @if (GAM.Models.Catalogos.SeleccionarClasificacionesDocumentos2P(@Request["IdUsuario"].ToString()).Count() > 0)
                                                            {

                                                                <table id="TSubClasificacion" class="table table-responsive table-striped table-hover table-bordered table-head-bg-warning" width="100%">
                                                                    <thead class="table-active">
                                                                        <tr>
                                                                            <th>Nombre</th>
                                                                            <th>Fecha</th>
                                                                            <th>Notas</th>
                                                                            <th width="2%">Modificar</th>
                                                                            <th width="2%">Eliminar</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (var datos in GAM.Models.Catalogos.SeleccionarClasificacionesDocumentos2P(@Request["IdUsuario"].ToString()))
                                                                        {
                                                                            if (datos.IdProveedor == Int32.Parse(IdUsuarios)) //OBTENER EL ID del proveedor DEL URL  y compararlo para mostrar datos relacionados
                                                                            {
                                                                                <tr>
                                                                                    <td><i class="fas fa-file text-info"></i>&nbsp;&nbsp;<a href="~/Documentos/@datos.Nombre" target="_blank">@datos.Nombre</a></td>
                                                                                    <td>@datos.Fecha</td>
                                                                                    <td>@datos.Notas</td>
                                                                                    <td style="font-size:20px;"><a href="/Administracion/Notas?Id= @datos.Id">  <i class="fas fa-pen"></i></a></td>
                                                                                    <td style="font-size:20px;"><a href="#" onclick=" SeguroEliminarArchivo(@datos.Id);"><i class="fas fa-trash text-danger"></i></a></td>
                                                                                </tr>
                                                                            }
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            }
                                                            else
                                                            {
                                                                <label class="label label-align-center">No se han agregado documentos.</label>
                                                            }
                                                            <!--FIN TABLA CLASIFCACIONES-->
                                                            @foreach (var itemss in GAM.Models.Catalogos.SeleccionarSubConsultaP("DocumentosASAESubClasificacion", "IdClasificacion", items.Id.ToString()))
                                                            {
                                                                var encabezadoo = "headingg" + itemss.Id;
                                                                var colapsoo = "colapsoo" + itemss.Id;
                                                                var gcolapsoo = "#colapsoo" + itemss.Id;
                                                                <div class="card">
                                                                    <div class="card-header collapsed" id="@encabezadoo" data-toggle="collapse" data-target="@gcolapsoo" aria-expanded="false" aria-controls="@colapsoo" role="button">
                                                                        <div class="span-icon">
                                                                            <div class="fas fa-folder text-primary"></div>
                                                                        </div>
                                                                        <div class="span-title text-dark">
                                                                            @itemss.Nombre
                                                                        </div>
                                                                        <div class="span-mode text-dark"></div>
                                                                    </div>

                                                                    <div id="@colapsoo" class="collapse" aria-labelledby="@encabezadoo" data-parent="#accordion">
                                                                        <div class="card-body" style="background-color: gainsboro">


                                                                            <!--INICIO SUBCLASIFICACIONES-->
                                                                            @if (GAM.Models.Catalogos.SeleccionarClasificacionSubClasificacionDocumentos(items.Id.ToString(), itemss.Id.ToString()).Count() > 0)
                                                                            {
                                                                                <table id="Tclasificacion" class="table table-responsive table-striped table-hover table-bordered table-head-bg-primary ">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>Nombre</th>
                                                                                            <th>Fecha</th>
                                                                                            <th>Notas</th>
                                                                                            <th width="3%">Modificar</th>
                                                                                            <th width="3%">Eliminar</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var datoss in GAM.Models.Catalogos.SeleccionarClasificacionSubClasificacionDocumentos2(items.Id.ToString(), itemss.Id.ToString()))
                                                                                        {

                                                                                            if (datoss.IdProveedor == Int32.Parse(IdUsuarios)) //OBTENER EL ID del proveedor DEL URL  y compararlo para mostrar datos relacionados
                                                                                            {
                                                                                                <tr>
                                                                                                    <td><i class="fas fa-file text-info"></i>&nbsp;&nbsp;<a href="~/Documentos/@datoss.Nombre" target="_blank">@datoss.Nombre</a></td>
                                                                                                    <td>@datoss.Fecha</td>
                                                                                                    <td>@datoss.Notas</td>
                                                                                                    <td style="font-size:20px;"><a href="/Administracion/Notas?Id= @datoss.Id">  <i class="fas fa-pen"></i></a></td>
                                                                                                    <td style="font-size:20px;"><a href="#" onclick=" SeguroEliminarArchivo(@datoss.Id);"><i class="fas fa-trash text-danger"></i></a></td>
                                                                                                </tr>
                                                                                            }
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            }
                                                                            else
                                                                            {
                                                                                <label class="label label-align-center">No se han agregado documentos.</label>
                                                                            }
                                                                            <!--FIN SUB CLASIFICACIONES-->

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            }

                                        </div>
                                    </div>

                                </div>

                            </div>
                            <!------FIN TARJETA CLASIFICACIONES---------->
                        </div>
                        <!--FIN Area Provedores-->
                        <!-- INICIO MODAL Administrar clasificaciones -->
                        <div class="modal fade" id="ModalClasificaciones" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="modal-title" id="ModalLabel1">Agregar/Eliminar Clasificaciones</h3>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">

                                        <div class="col-md-12">

                                            <div class="row">

                                                <div class="col-md-8 col-lg-8">
                                                    <div class="form-group form-inline">
                                                        <label for="aClasificacion" class="col-md-3 col-form-label">Nombre</label>
                                                        <div class="col-md-9 col-lg-9">
                                                            <input type="text" class="form-control form-control-sm input-solid" id="aClasificacion" required autocomplete="off">
                                                            <button type="button" class="btn btn-success" data-dismiss="modal" onclick="AgregarClasificacion(@Request["IdUsuario"]);">Agregar</button>
                                                        </div>

                                                    </div>
                                                </div>

                                            </div>

                                            <div class="row">

                                                <table id="catalogos" class="display compact" style="width:100%">
                                                    <thead>
                                                        <tr>
                                                            <th width="1%">Id</th>
                                                            <th width="60%">Nombre</th>
                                                            <th width="3%" align="center"></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>

                                            </div>

                                        </div>


                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--FIN  MODAL Administrar clasificaciones-->
                        <!--INICIO Administrar subclasificaciones -->
                        <div class="modal fade" id="ModalSubClasificaciones" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="modal-title" id="ModalLabel1">Agregar/Eliminar SubClasificaciones</h3>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">

                                        <div class="col-md-12">

                                            <div class="row">

                                                <div class="col-md-6">
                                                    <div class="form-group form-inline">
                                                        <label for="aSubClasificacion" class="col-md-3 col-form-label">Nombre</label>
                                                        <div class="col-md-9 col-lg-9">
                                                            <input type="text" class="form-control form-control-sm input-solid" id="aSubClasificacion" required autocomplete="off">
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-md-6">

                                                    <div class="form-group form-inline">
                                                        <label for="aClasificacion" class="col-md-3 col-form-label">Nombre</label>
                                                        <div class="col-md-9 col-lg-9">

                                                            <select class="form-control form-control-sm input-solid" id="aaclasificacion" name="aaclasificacion" style="width: 180px">
                                                                <option value="">&nbsp;</option>
                                                                @foreach (var clas in GAM.Models.Catalogos.ListarClasP("DocumentosASAEClasificacion" ,@Request["IdUsuario"]))
                                                                {
                                                                    <option value="@clas.Id">@clas.Nombre</option>
                                                                }
                                                            </select>

                                                            <button type="button" class="btn btn-success" data-dismiss="modal" onclick="AgregarSubClasificacion(@Request["IdUsuario"]);">Agregar</button>
                                                        </div>

                                                    </div>

                                                </div>


                                            </div>

                                            <div class="row">


                                                <table class="display compact table-striped table-hover" style="width:100%">
                                                    <thead class="header">
                                                        <tr>
                                                            <th>Id</th>
                                                            <th>Nombre</th>
                                                            <th>Clasificación</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var items in ViewBag.SubClas)
                                                        {
                                                            <tr>
                                                                <td>@items.Id</td>
                                                                <td>@items.Nombre</td>
                                                                <td>@GAM.Models.Catalogos.SeleccionarNombrePorId(items.IdClasificacion.ToString(), "DocumentosASAEClasificacion")</td>
                                                                <td width="3%"><a href="#" onclick="EliminarSubClasificacion(@items.Id)"><i class="fas fa-trash text-danger"></i></a></td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>




                                            </div>

                                        </div>


                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--FIN Administrar subclasificaciones -->
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="ModalAgregarEmpresa" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="ModalLabel">Agregar @GAM.Utilerias.Titulos.Empresa(Session["IdConfiguracion"].ToString(), "S")</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">



                <div class="row">
                    <div class="col-md-12 col-lg-12">

                        <div class="form-group form-inline">
                            <label for="aNombre" class="col-md-3 col-form-label fc-left">Nombre</label>
                            <div class="col-md-9 p-0">
                                <input type="text" class="form-control input-full" name="empNombre" id="empNombre" placeholder="">
                            </div>
                        </div>

                        <div class="form-group form-inline">
                            <label for="aRFC" class="col-md-3 col-form-label fc-left">RFC</label>
                            <div class="col-md-9 p-0">
                                <input type="text" class="form-control input-full" name="empRFC" id="empRFC" placeholder="">
                            </div>
                        </div>

                        <div class="form-group form-inline">
                            <label for="aTelefono" class="col-md-3 col-form-label fc-left">Teléfono</label>
                            <div class="col-md-9 p-0">
                                <input type="text" class="form-control input-full" name="empTelefono" id="empTelefono" placeholder="">
                            </div>
                        </div>


                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn btn-primary" data-dismiss="modal" onclick="GuardarNuevaEmpresa();">Guardar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalModificarCorreo" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="ModalLabel">Modificar Correo Actual</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">



                <div class="row">
                    <div class="col-md-12 col-lg-12">

                        <div class="form-group form-inline">
                            <label for="CorreoNuevo" class="col-md-3 col-form-label fc-left">Correo nuevo</label>
                            <div class="col-md-9 p-0">
                                <input type="text" class="form-control input-full" name="CorreoNuevo" id="CorreoNuevo" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-12 col-lg-12">
                        <center>
                            <button type="submit" class="btn btn-success" data-dismiss="modal" onclick="CambiarCorreo();">Guardar</button>
                        </center>
                    </div>

                </div>

                <div class="row">

                    <div class="col-md-12 col-lg-12">

                        <center>
                            <div class="form-group form-inline">
                                <div id="divCorreosAnteriores"></div>
                            </div>
                        </center>

                    </div>

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>

            </div>
        </div>
    </div>
</div>




<script>

    $(document).ready(function () {
        $('#Tclasificacion').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.12.1/i18n/es-MX.json'
            }
        });

        $('#TSubClasificacion').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.12.1/i18n/es-MX.json'
            }
        });
    });

    $(document).ready(function () {
        $('#opcContactos').addClass("nav-item active submenu");
        $('#Nombre').select();

        $('.input-number').on('input', function () {
            this.value = this.value.replace(/[^0-9]/g, '');
        });

        //Inicialización de la tabla
        $('#tabla01').append('<caption style="caption-side: top"><h3>Archivos Agregados</h3></caption>');
        $('#tabla01').DataTable({
            "language": {
                "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"
            },
            columns: [
                { data: 'Nombre' }
                , { data: 'Fecha' }
                , { data: 'Notas' }
            ],
            columnDefs: [
                {
                    targets: [0],
                    data: "Nombre",
                    render: function (data) {
                        return '<a href="/Documentos/' + data + '" target="_blank">' + data + '</a>';
                        //return '<a href="#" onclick=AbrirPopUp("' + data + '");>' + data + '</a>';
                    }
                }, {
                    targets: [1],
                    render: function (data) {
                        var fecha = new Date(parseInt(data.substr(6)));
                        var mes = (fecha.getMonth() + 1) < 10 ? '0' + (fecha.getMonth() + 1) : (fecha.getMonth() + 1);
                        var fecha = fecha.getDate() + '/' + mes + '/' + fecha.getFullYear();
                        return fecha;
                    }
                }
                , {
                    targets: [3],
                    data: "Id",
                    className: "text-center",
                    render: function (data) {
                        return '<a href="/Administracion/Notas?Id=' + data + '" class=text-primary><i class="fas fa-clipboard-list" data-toggle="tooltip" data-placement="left" title="Agregar Notas"></i></a>';
                    }
                }
                , {
                    targets: [4],
                    data: "Id",
                    className: "text-center",
                    render: function (data) {
                        data = '<a href="#" onclick="SeguroEliminarArchivo(' + data + ');" class="text-danger"><i class="fas fa-trash" data-toggle="tooltip" data-placement="left" title="Eliminar"></i></a>';
                        return data;
                    }
                }
            ]
        });

        var obtenerParametrodeURL = function getUrlParameter(sParam) {
            var sPageURL = window.location.search.substring(1),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                }
            }
        };

        var idd = obtenerParametrodeURL('IdUsuario');

        CargaInicial(idd);

    });
    //ayuda a estructurar nuestros datos dentro de la tabla
    $(document).ready(function () {

        $('#opcDocs').addClass("nav-item active submenu");
        $('#Espera').hide();

        $('#catalogos').DataTable({
            "searching": false,
            "paging": false,
            "language": {
                "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"
            },
            info: false,
            columns: [
                { data: 'Id' },
                { data: 'Nombre' }
            ],
            columnDefs: [
                {
                    targets: [2],
                    data: "Id",
                    render: function (data) {
                        return '<a href="#" onclick=EliminarClasificacion(' + data + ');><i class="fas fa-trash text-danger"></i></a>';
                    }
                }
            ]
        });

        ValidarSiUsuarioPuedeAgregarClasSubClas();

    });

    $(document).ready(function () {
      activaTab(@Request["num"]);
    });

    function activaTab(tab) {
       $('#' + tab ).click();
    };


    function AbrirlModalAgregarEmpresa() {
        $('#ModalAgregarEmpresa').modal('show');
    }

    function GuardarNuevaEmpresa() {
        $.ajax({
            type: "GET",
            url: "/Administracion/AgregarEmpresaProveedor/",
            data: {
                nombre: $('#empNombre').val(),
                rfc: $('#empRFC').val(),
                telefono: $('#empTelefono').val()
            },
            contentType: "application/json",
            dataType: "json",
            beforeSend: function () {
                $('#Espera').show();
            },
            success: function (data) {
                console.log(data);
                if (data > 0) {
                    swal({
                        title: 'GAM ASAE',
                        text: 'Se guardó la nueva empresa, ahora puede seleccionarla del listado.',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            //Actualizar el select de las empresas
                            CargarEmpresasProveedor();
                            //location.reload();
                        });

                }
                else {
                    swal({
                        title: 'GAM ASAE',
                        text: 'EL RFC ya está ocupado por otra empresa',
                        icon: 'error',
                        buttons: {
                            confirm: {
                                className: 'btn btn-error'
                            }
                        }
                    });
                }
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function CargarEmpresas() {
        $.ajax({
            type: "GET",
            url: "/Empresas/SeleccionarEmpresasPorIdConfiguracion/",
            data: { id: $('#IdConfiguracion').val() },
            contentType: "application/json",
            dataType: "json",
            beforeSend: function () {
                $('#Espera').show();
            },
            success: function (data) {
                //console.log(data);
                $('#Empresa').empty();
                for (var i = 0; i < data.length; i++) {
                    $('#Empresa').append('<option value=' + data[i].Id + '>' + data[i].Nombre + '</option>');
                }
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (errormessage) {
                //swal({
                //    title: 'GAM ASAE',
                //    text: 'No se procesaron los datos correctamente',
                //    icon: 'error',
                //    buttons: {
                //        confirm: {
                //            className: 'btn btn-error'
                //        }
                //    }
                //});
            }
        });
    }

    function CargarEmpresasProveedor() {
        $.ajax({
            type: "GET",
            url: "/Administracion/SeleccionarEmpresasProveedores/",
            contentType: "application/json",
            dataType: "json",
            beforeSend: function () {
                $('#Espera').show();
            },
            success: function (data) {
                //console.log(data);
                $('#Empresa').empty();
                for (var i = 0; i < data.length; i++) {
                    $('#Empresa').append('<option value=' + data[i].Id + '>' + data[i].Nombre + '</option>');
                }
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function validarCorreo(email) {

        var fisicamoral = $('input:radio[name=optionsRadios]:checked').val()

        if (fisicamoral == 1) {
            var regex = /[\w-\.]{2,}@@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/;

            if (!regex.test($('#Correo').val().trim())) {
                swal({
                    title: 'GAM ASAE',
                    text: 'El correo electrónico es inválido, revise',
                    buttons: {
                        confirm: {
                            className: 'btn btn-warning'
                        }
                    },
                });
                return false;
            }
        }
        return true;
    }

    function GuardarModificado() {
        if ($("input[name='optionsRadios']:checked").val() == "1") {

            if ($('#Correo').val() === "") {
                swal({
                    text: 'El campo de correo electrónico NO puede quedarse vacío',
                    icon: 'warning',
                    buttons: {
                        confirm: {
                            className: 'btn btn-warning'
                        }
                    }
                });
            }
        }
        var checado = 0;
        if ($("input[name='optionsRadios']:checked").val() == "1") {
            checado = 1;
        }
        else {
            checado = 2;
        }
        var checado2 = 0;
        if ($("input[name='RadiosInternoExterno']:checked").val() == "1") {
            checado2 = 1;
        }
        else {
            checado2 = 2;
        }
        $.ajax({
            url: "/Administracion/GuardarResponsableModificado/",
            data: {
                Nombre: $('#Nombre').val(), Correo: $('#Correo').val(), Telefono: $('#Telefono').val(), Celular: $('#Celular').val(),
                Empresa: $('#Empresa').val(), Direccion: $('#Direccion').val(), Ciudad: $('#Ciudad').val(), Notas: $('#Notas').val(),
                IdUsuario: $('#IdUsuario').val(), FisicaMoral: checado, RFC: $('#RFC').val(), InternoExterno: checado2
            },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                if (data == 0) {
                    swal({
                        title: 'GAM ASAE',
                        text: 'El correo electrónico ya esta siendo usado en otro contacto, revise',
                        icon: 'warning',
                        buttons: {
                            confirm: {
                                className: 'btn btn-warning'
                            }
                        }
                    });
                }
                if (data >= 0) {
                    swal({
                        title: 'GAM ASAE',
                        text: 'El registro se modificó exitosamente',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            location.href = '/Administracion/UsuariosR';
                        }
                    );
                }
                //$('#Guardado1').hide();
            },
            error: function (errormessage) {
                //swal({
                //    title: 'GAM ASAE',
                //    text: 'Ha habido un error al intentar guardar los datos',
                //    icon: 'error',
                //    buttons: {
                //        confirm: {
                //            className: 'btn btn-error'
                //        }
                //    }
                //});
            }
        });
    }

    function MostrarCambiarCorreo() {
        $('#ModalModificarCorreo').modal('show');
        ListarCorreosCambiados();
    }

    function CambiarCorreo() {
        $.ajax({
            url: "/Administracion/CambiarCorreo/",
            data: {
                idusuario: $('#IdUsuario').val(),
                correo: $('#CorreoNuevo').val()
            },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                if (data == 1) {
                    swal({
                        title: 'GAM ASAE',
                        text: 'Se ha modificado el correo de la persona y se ha reenviado un correo para avisarle de este cambio',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            location.href = '/Administracion/UsuariosR';
                        }
                    );
                }
            },
            error: function () {
            }
        });
    }

    function ListarCorreosCambiados() {
        $.ajax({
            url: "/Administracion/ListarCorreosCambiados/",
            data: {
                idusuario: $('#IdUsuario').val()
            },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                //Agregar tabla
                $('#divCorreosAnteriores').empty();
                var tabla = '<table class=table><tr><th>Correos Anteriores</th></tr>';
                for (var i = 0; i < data.length; i++) {
                    tabla += '<tr><td>' + data[i] + '</td></tr>';
                }
                tabla += '</table>';
                $('#divCorreosAnteriores').append(tabla);

            },
            error: function () {
            }
        });
    }

    function CambiarEmpresasALocales() {
        CargarEmpresas();
        $('#AgregadoEmpresa').hide();
    }

    function CambiarEmpresasAProveedores() {
        CargarEmpresasProveedor();
        $('#AgregadoEmpresa').show();
    }

    //Documentos

    function CargaInicial(idusuario) {
        $.ajax({
            type: "GET",
            url: '/Administracion/CargaInicialArchivos',
            data: { idproveedor: idusuario },
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {

                $('#tabla01').DataTable().clear().rows.add(data).draw();
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function SubirArchivo() {

        if ($('#PalabrasClave').val() == '') {

            swal({
                text: 'Agregue por lo menos una palabra clave',
                icon: 'warning',
                buttons: {
                    confirm: {
                        className: 'btn btn-warning'
                    }
                }
            });
            return;
        }

        //Notificación clasificacion
        if ($('#clasificacion').val() == '') {

            swal({
                text: 'Seleccione alguna clasificación',
                icon: 'warning',
                buttons: {
                    confirm: {
                        className: 'btn btn-warning'
                    }
                }
            });
            return;
        }

        var fileUpload = $("#ArchivoASubir").get(0);
        var files = fileUpload.files;

        if (files.length == 0) {
            $.notify('Seleccione un archivo para subir.', {
                autohide: true, type: 'danger', placement: {
                    from: 'bottom',
                    align: 'right'
                }
            });
            return;
        }

        var fileData = new FormData();

        fileData.append('idproveedor', $('#IdUsuario').val());
        fileData.append('notas', $('#NotasArc').val());
        fileData.append('palabrasclave', $('#PalabrasClave').val());

        fileData.append('clasificacion', $('#clasificacion').val());
        fileData.append('subclasificacion', $('#subclasificacion').val());
        fileData.append(files[0].name, files[0]);

        $.ajax({
            url: '/Administracion/SubirArchivo',
            type: 'post',
            datatype: 'json',
            contentType: false,
            processData: false,
            async: false,
            data: fileData,
            success: function (data) {
                //console.log('Datos de la subida' + data.length);
                if (data.length == 1) {
                    //Carga por primera vez
                    $('#ArchivoASubir').val('');

                    $.notify('Se agregó el archivo exitosamente.', {
                        autohide: true, type: 'success', placement: {
                            from: 'bottom',
                            align: 'right'
                        }
                    });

                }
                else if (data.length > 1) {
                    //Carga más a los existentes
                    $('#ArchivoASubir').val('');

                    $.notify('Se agregó el archivo exitosamente.', {
                        autohide: true, type: 'success', placement: {
                            from: 'bottom',
                            align: 'right'
                        }
                    });
                }
                window.location.href = 'UsuariosREdicion?IdUsuario=' + @Request["IdUsuario"] + "&num=3";
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });

    }

    function SeleccionarPorId(id) {
        $.ajax({
            url: "/Administracion/DocumentoSeleccionarPorId/",
            data: { id: id },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            beforeSend: function () {
                $('#Espera').show();
            },
            success: function (data) {
                //$('#divNotas').show();
                $('#Notas').val(data.Notas);
                $('#IdDocumento').val(data.Id);
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function AgregarNotas() {
        $.ajax({
            type: 'GET',
            url: "/Administracion/AgregarNotas",
            data: {
                Notas: $("#Notas").val(),
                Id: $("#IdDocumento").val(),
                idproveedor: $('#IdUsuario').val()
            },
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                if (data.length > 0) {
                    $.notify('Se agregaron las notas exitosamente.', {
                        autohide: true, type: 'success', placement: {
                            from: 'bottom',
                            align: 'right'
                        }
                    });

                    //Rellenar tabla de archivos
                    $('#tabla01').DataTable().clear().rows.add(data).draw();
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                swal({
                    text: 'Ha ocurrido un error, revíselo en la consola para más información.',
                    icon: 'error',
                    buttons: {
                        confirm: {
                            className: 'btn btn-error'
                        }
                    }
                }).then(
                    function () {
                        console.log('jqXHR:');
                        console.log(jqXHR);
                        console.log('textStatus:');
                        console.log(textStatus);
                        console.log('errorThrown:');
                        console.log(errorThrown);
                    });
            }
        });
    }

    function SeguroEliminarArchivo(id) {
        
        swal({
            title: 'Eliminación de Archivos',
            text: "¿Está seguro de querer eliminar este archivo?",
            type: 'warning',
            buttons: {
                confirm: {
                    text: '¡Si, eliminarlo!',
                    className: 'btn btn-success'
                },
                cancel: {
                    visible: true,
                    className: 'btn btn-warning',
                    text: 'Cancelar'
                }
            }
        }).then((Delete) => {
            if (Delete) {
                SeguroEliminarArchivo2(id);
            }
        });
    }

    function SeguroEliminarArchivo2(id) {
       
        $.ajax({
            type: 'GET',
            url: "/Administracion/QuitarArchivo",
            data: {
                iddocumento: id,
                idproveedor: $('#IdUsuario').val()
            },
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                console.log(data.length);
                if (data.length > 0 || data == '') {

                    $.notify('Se eliminó el archivo exitosamente.', {
                        autohide: true, type: 'success', placement: {
                            from: 'bottom',
                            align: 'right'
                        }
                    });
                    location.reload();

                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function ClasificacionSeleccionada() {
        var valor = $('#clasificacion').val();
        if (valor != '') {
            //Obtener las subclasificaciones que pertenecen a esta clasificacion y llenar el select correspondiente
            $.ajax({
                url: "/DocumentosASAE/SeleccionarSubclasificacionesPorClasificacionP/",
                data: { idclasificacion: valor },
                type: "GET",
                contentType: "application/json",
                dataType: "json",
                beforeSend: function () {
                    $('#Espera').show();
                },
                success: function (data) {
                    //console.log(data);
                    var len = data.length;
                    $('#subclasificacion').empty();
                    $('#subclasificacion').append('<option value=></option>');
                    for (var i = 0; i < len; i++) {
                        $('#subclasificacion').append('<option value=' + data[i].Id + '>' + data[i].Nombre + '</option>');
                    }
                },
                complete: function () {
                    $('#Espera').hide();
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log('jqXHR:');
                    console.log(jqXHR);
                    console.log('textStatus:');
                    console.log(textStatus);
                    console.log('errorThrown:');
                    console.log(errorThrown);
                }
            });
        }
    }

    function AdministrarClasificaciones(id) {
        $('#ModalClasificaciones').modal('show');
        $.ajax({
            type: "GET",
            url: '/Administracion/SeleccionarTablaP',
            data: { tabla: 'DocumentosASAEClasificacion', Id: id },
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                //$('#catalogos').val(tabla);
                $('#catalogos').DataTable().clear().rows.add(data).draw();
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function AgregarClasificacion(id) {
        $.ajax({
            type: "GET",
            url: '/Administracion/TablasAgregarNuevop',
            data: { tabla: 'DocumentosASAEClasificacion', nombre: $('#aClasificacion').val(), Id: id },
            contentType: "application/json",
            dataType: 'json',
            success: function (data) {
                $('#catalogos').DataTable().clear().rows.add(data).draw();
                location.reload();
            },
            complete: function () {
                $('#Espera').hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function EliminarClasificacion(id) {
        $.ajax({
            url: "/Administracion/EliminarDocumentosASAEClasificacionP/",
            data: { id: id },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                if (data >= 1) {
                    swal({
                        title: 'CRM',
                        text: 'Se eliminó el registro exitosamente',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            location.reload();
                        });
                }
                else {
                    swal({
                        title: 'CRM',
                        text: 'Si hay registros relacionados NO se borrará, revise bien la tabla de documentos.',
                        icon: 'error',
                        buttons: {
                            confirm: {
                                className: 'btn btn-danger'
                            }
                        }
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function AdministrarSubClasificaciones() {
        $('#ModalSubClasificaciones').modal('show');
    }

    function AgregarSubClasificacion(id) {
        $.ajax({
            url: "/Administracion/GuardarDocumentosASAESubClasificacionP/",
            data: { nombre: $('#aSubClasificacion').val(), clasificacion: $('#aaclasificacion').val(), Id: id },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                if (data >= 1) {
                    swal({
                        title: 'CRM',
                        text: 'Se ha guardado el cambio al registro exitosamente',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            location.reload();
                        });
                }
                else {
                    swal({
                        title: 'CRM',
                        text: 'Ha habido un error al intentar procesar los datos',
                        icon: 'error',
                        buttons: {
                            confirm: {
                                className: 'btn btn-error'
                            }
                        }
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }

    function EliminarSubClasificacion(id) {
        $.ajax({
            url: "/Administracion/EliminarDocumentosASAESubClasificacionP/",
            data: { id: id },
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                if (data >= 1) {
                    swal({
                        title: 'CRM',
                        text: 'Se eliminó el registro exitosamente',
                        icon: 'success',
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    }).then(
                        function () {
                            $('#aaclasificacion').val('');
                            location.reload();
                        });
                }
                else {
                    swal({
                        title: 'CRM',
                        text: 'Si hay registros relacionados NO se borrará, revise bien la tabla de documentos.',
                        icon: 'error',
                        buttons: {
                            confirm: {
                                className: 'btn btn-danger'
                            }
                        }
                    });
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log('jqXHR:');
                console.log(jqXHR);
                console.log('textStatus:');
                console.log(textStatus);
                console.log('errorThrown:');
                console.log(errorThrown);
            }
        });
    }
</script>